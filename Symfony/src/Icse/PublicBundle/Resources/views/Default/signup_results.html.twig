{% macro signup_filter(currentShow, label, id) %}
<a {% if id == currentShow %}class='current'{% endif %} href="{{ path('IcsePublicBundle_signup_results_tmp', {'show':id}) }}">{{ label }}</a>{% endmacro %} 

{% extends 'IcsePublicBundle:Default:template.html.twig' %}
{% set currentPage = 'signup_results' %}

{% block stylesheets %}
{{ parent() }}
<link rel="stylesheet" type="text/css" media="screen" href="{{ asset('bundles/icsemembers/css/main.css') }}" />
{% endblock %} 

{% block aboveFooterAttrs %}class=full_width{% endblock %} 

{% set pageTitle = 'Signups' %} 

{% block content %}

<p id=signupsfilter >
Show: 
  {{ _self.signup_filter(currentShow, "All", "all") }}
| {{ _self.signup_filter(currentShow, "Concert-goers", "concertgoer") }}
| {{ _self.signup_filter(currentShow, "Players", "player") }}
| {{ _self.signup_filter(currentShow, "Violinists", "violin") }}
| {{ _self.signup_filter(currentShow, "Violists", "viola") }}
| {{ _self.signup_filter(currentShow, "Cellists", "cello") }}
| {{ _self.signup_filter(currentShow, "Double Bassists", "doublebass") }}
| {{ _self.signup_filter(currentShow, "Other Players", "otherplayer") }}
</p>

<p>{{ people_count }} people</p>

<p>
All e-mail addresses:
<textarea id=email_textarea readonly="readonly" cols=50>{% for signup in signups %}{{ signup.getEmail() }}
{% endfor %}
</textarea>
</p>

<script>
  $(document).ready(function() {
      $("#email_textarea").focus(function() { $(this).select(); } );
      $("#email_textarea").mouseup(function() { return false; } );
  }); 
</script>


<table id=signupstable>
  <tr>
    <th>Email</th>
    <th>Name</th>
    <th>Login</th>
    <th>Department</th>
    <th>Player?</th>
    <th>Instrument</th>
    <th>Standard</th>
    <th>Submitted at</th>
  </tr>
  
  {% for signup in signups %}
  <tr class={{ cycle(['odd', 'even'], loop.index) }}>
    <td>{{ signup.getEmail() }}</td>
    <td>{{ signup.getFirstName() }} {{ signup.getLastName() }}</td>
    <td>{{ signup.getLogin() }}</td>
    <td>{{ signup.getDepartment() }}</td>
    <td>
      {% if signup.getPlayer() %}
        Yes
      {% else %}
        No
      {% endif %}
    </td>
    <td>{{ signup.getInstrument() }}</td>
    <td>{{ signup.getStandard() }}</td>
    <td>{{ signup.getSubscribedAt()|date('j/m/y H:i:s') }}</td>
  </tr>
  {% endfor %}
</table>

{% endblock %}
