$(document).ready(function(){var e=300;var r=null;var i=null;$(".never_show").hide();function n(e){if(i===null){$(".show_if_email, .show_if_username, .show_if_player, #username_or_email_error").slideUp(e)}else if(i==="email"){$(".show_if_email").slideDown(e)}else if(i==="username"){$(".show_if_username").slideDown(e)}else if(i==="error"){$("#username_or_email_error").slideDown()}if(r!==null){$("#username_or_email_lookup").slideDown(e)}if(i==="email"||i==="username"){if(r){$(".show_if_player").slideDown(e)}else{$(".show_if_player").slideUp(e)}}}function l(e){if(i===null){$("#username_or_email_lookup input").prop("disabled",true);var r=$("#username_or_email_field").val();$.getJSON(Routing.generate("IcsePublicBundle_query_username"),{input:r},function(l){if(l["type"]=="email"){i="email";$("#form_email").val(r);$("#form_login").val("");$("#form_department").val("")}else if(l["type"]=="username"){i="username";$("#form_first_name").val(l["first_name"]);$("#form_last_name").val(l["last_name"]);$("#form_email").val(l["email"]);$("#form_login").val(r);$("#form_department").val(l["department"])}else{i="error"}$(".error_list").remove();n(e);$("#username_or_email_lookup input").prop("disabled",false)})}}$("#username_or_email_lookup #lookup_button").click(function(){l(e)});$("#username_or_email_field").keyup(function(r){if(r.keyCode<13||r.keyCode==32||r.keyCode>40){i=null;n(e)}else if(r.keyCode==13){l(e)}});$("#username_or_email_field").bind("paste",function(){i=null;n(e)});function o(){if(r){if($('input[name="form[instrument][]"]').is(":checked")){$('input[name="form[instrument][]"]').prop("required",false)}else{$('input[name="form[instrument][]"]').prop("required",true)}}else{$('input[name="form[instrument][]"]').prop("required",false)}}$("#form_instrument").change(o);function a(e){if($('#form_player input[value="1"]').is(":checked")){r=true;$("#form_standard").prop("required",true);m()}else if($('#form_player input[value="0"]').is(":checked")){r=false;$("#form_standard").prop("required",false);$("#form_other_instrument").prop("required",false)}else{r=null}o();n(e)}$("#form_player").change(e,a);function m(){if($('#form_instrument input[value="other"]').is(":checked")){$("#form_other_instrument").prop("disabled",false);$("#form_other_instrument").prop("required",true)}else{$("#form_other_instrument").prop("disabled",true);$("#form_other_instrument").prop("required",false)}}$("#form_instrument").change(m);n(0);m();a(0);if($("#username_or_email_field").val()!=""){i=$("#form_login").val()!=""?"username":"email";n(0)}});